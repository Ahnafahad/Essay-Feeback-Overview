<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Viewer</title>
    <style>
        * { 
            box-sizing: border-box; 
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            background-color: #f0f2f5;
        }

        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e1e4e8;
        }

        .header h1 {
            color: #1a1a1a;
            font-size: 24px;
        }

        .name-section {
            cursor: pointer;
            padding: 15px;
            margin: 10px 0;
            background: #f8fafc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.2s ease;
        }

        .name-section:hover {
            background: #f1f5f9;
        }

        .name-section h2 {
            font-size: 18px;
            color: #2d3748;
            margin: 0;
        }

        .feedback-container {
            display: none;
            padding: 20px;
            margin-left: 25px;
            border-left: 2px solid #e1e4e8;
        }

        .feedback-container.expanded {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .question-section {
            margin: 10px 0;
            border-left: 3px solid #e1e4e8;
            margin-left: 20px;
        }

        .question-header {
            background: #f1f5f9;
            padding: 12px 15px;
            cursor: pointer;
            border-radius: 6px;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-header:hover {
            background: #e2e8f0;
        }

        .question-content {
            display: none;
            padding-left: 15px;
        }

        .question-content.expanded {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .feedback-item {
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin-bottom: 20px;
            background: #fff;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .timestamp {
            color: #64748b;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .question {
            font-weight: bold;
            margin-bottom: 10px;
            color: #1e40af;
        }

        .feedback-content {
            white-space: pre-wrap;
            color: #4a5568;
            line-height: 1.6;
        }

        .chevron {
            transition: transform 0.3s ease;
        }

        .chevron.expanded {
            transform: rotate(90deg);
        }

        .question-chevron {
            transition: transform 0.3s ease;
        }

        .question-chevron.expanded {
            transform: rotate(90deg);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .hide {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Feedback Overview</h1>
        </div>

        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search names or feedback..." id="searchInput">
        </div>

        <div id="feedback-list"></div>
    </div>

    <script>
        // Original feedback data
        let feedbackData = {
            "Shorfuddin": [
                {
                    "timestamp": "04/11/2024, 4:12:30 am",
                    "question": "Comment on the importance of resilience in personal growth and societal progress.",
                    "feedback": "Essay Marks: 10\n1. Content (25%)\nRelevance (15%): The essay clearly addresses the topic of resilience, focusing on its importance in dealing with life's inevitable challenges and how it contributes to both personal growth and societal progress.\nMarks Obtained: 12 / 15\nDepth of Knowledge (10%): While the essay covers the general idea of resilience, it lacks in-depth exploration of how resilience specifically affects societal progress. A more detailed discussion on the broader societal impacts would have strengthened this section.\nMarks Obtained: 6 / 10\n2. Structure and Organization (15%)\nIntroduction and Conclusion (5%): The essay has a strong start, identifying the inevitability of challenges. However, the conclusion is less defined, and the essay could benefit from a more summarized closing to reinforce the main points.\nMarks Obtained: 3 / 5\nLogical Flow (10%): The flow of ideas is somewhat clear, though some sentences feel fragmented. The transitions between ideas, especially towards the end, could be smoother.\nMarks Obtained: 6 / 10\n3. Argumentation and Analysis (20%)\nQuality of Arguments (10%): The essay presents the basic argument that resilience is necessary for handling life's challenges and making progress. However, the arguments could be expanded with examples or analogies to support the claims.\nMarks Obtained: 5 / 10\nCritical Thinking (10%): The essay shows an understanding of resilience but lacks a critical examination of the challenges in developing resilience or specific examples of resilience in societal contexts.\nMarks Obtained: 5 / 10\n4. Language and Grammar (10%)\nLanguage use is generally clear, though there are minor grammatical issues, such as some fragmented sentences and awkward phrasing. A few improvements in sentence structure would enhance readability.\nMarks Obtained: 6 / 10\n5. Originality and Creativity (10%)\nUnique Perspectives (5%): The essay provides a somewhat common perspective on resilience without introducing new insights or unique viewpoints.\nMarks Obtained: 2 / 5\nInnovative Examples (5%): There are no specific examples or illustrations to support the discussion, which makes the argument feel more generalized.\nMarks Obtained: 2 / 5\n6. Length of Essay (10%)\nThe essay meets the basic length requirement, though slightly more content could have provided room for deeper analysis.\nMarks Obtained: 10 / 10\nFinal Score: 52 / 100\nConverted Score (out of 10): 5.2 / 10\n\nOverall Feedback and Areas for Improvement:\nYour essay effectively identifies the role of resilience in handling challenges, which is relevant to the topic. However, to strengthen your argument, it would help to explore specific ways resilience contributes to societal progress, such as examples from history or contemporary society where resilience led to significant social change.\n\nSuggestions for Improvement:\n\nDepth and Examples: Incorporate specific examples, such as famous figures or movements that demonstrated resilience, to illustrate your points more vividly.\nStructure and Flow: Work on creating smoother transitions between ideas and develop a clear conclusion that reinforces the essay's main message.\nCritical Analysis: Address potential challenges in building resilience or discuss how resilience is fostered at a societal level to add a layer of critical thinking.\nLanguage and Grammar: Review sentence structure to avoid fragmentation, and aim for clearer phrasing for improved readability.\nOriginality: Try to bring in unique perspectives or less obvious examples to make your essay stand out.\nWith these improvements, your writing will become more compelling and well-rounded, providing a stronger argument for the importance of resilience."
                }
            ],
            // ... [Rest of the feedbackData object would continue here with all other students' data]
        };

        // Generate the feedback list HTML with nested structure
        const feedbackList = document.getElementById('feedback-list');
        feedbackList.innerHTML = Object.entries(feedbackData).map(([name, feedbacks], nameIndex) => {
            const questionGroups = {};
            feedbacks.forEach(item => {
                if (!questionGroups[item.question]) {
                    questionGroups[item.question] = [];
                }
                questionGroups[item.question].push(item);
            });

            return `
                <div class="feedback-section">
                    <div class="name-section" onclick="toggleFeedback('${nameIndex}')">
                        <svg id="chevron-${nameIndex}" class="chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>${name}</h2>
                    </div>
                    <div id="feedback-${nameIndex}" class="feedback-container">
                        ${Object.entries(questionGroups).map(([question, items], qIndex) => `
                            <div class="question-section">
                                <div class="question-header" onclick="toggleQuestion('${nameIndex}-${qIndex}', event)">
                                    <svg class="question-chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                    <div>${question}</div>
                                </div>
                                <div id="question-${nameIndex}-${qIndex}" class="question-content">
                                    ${items.map(item => `
                                        <div class="feedback-item">
                                            <div class="timestamp">${item.timestamp}</div>
                                            <div class="feedback-content">${item.feedback}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }).join('');

        function toggleFeedback(nameId) {
            const container = document.getElementById('feedback-' + nameId);
            const chevron = document.getElementById('chevron-' + nameId);
            const allContainers = document.getElementsByClassName('feedback-container');
            const allChevrons = document.getElementsByClassName('chevron');
            
            Array.from(allContainers).forEach(cont => {
                if (cont.id !== 'feedback-' + nameId) {
                    cont.classList.remove('expanded');
                }
            });
            
            Array.from(allChevrons).forEach(chev => {
                if (chev.id !== 'chevron-' + nameId) {
                    chev.classList.remove('expanded');
                }
            });
            
            container.classList.toggle('expanded');
            chevron.classList.toggle('expanded');
        }

        function toggleQuestion(id, event) {
            event.stopPropagation(); // Prevent triggering parent toggle
            const content = document.getElementById('question-' + id);
            const header = event.currentTarget;
            const chevron = header.querySelector('.question-chevron');
            
            content.classList.toggle('expanded');
            chevron.classList.toggle('expanded');
        }

        function searchFeedback() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const nameSections = document.getElementsByClassName('name-section');
            
            Array.from(nameSections).forEach(section => {
                const name = section.querySelector('h2').textContent.toLowerCase();
                const feedbackContainer = section.nextElementSibling;
                const feedbackContent = feedbackContainer.textContent.toLowerCase();
                
                if (name.includes(searchTerm) || feedbackContent.includes(searchTerm)) {
                    section.parentElement.classList.remove('hide');
                } else {
                    section.parentElement.classList.add('hide');
                }
            });
        }

        document.getElementById('searchInput').addEventListener('input', searchFeedback);
    </script>
</body>
</html>
